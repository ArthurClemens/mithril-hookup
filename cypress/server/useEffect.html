<html>
<body>
  <div id="root"></div>
  <script src="./js/mithril@1.1.6.js"></script>
  <script src="../../dist/mithril-hookup.js"></script>
  <script>
const hookup = mithrilHookup.hookup;

const SideEffect = hookup((vnode, { useState, useEffect }) => {
  const [darkModeEnabled, setDarkModeEnabled] = useState(false);
  useEffect(
    () => {
      const className = "dark-mode";
      const element = document.querySelector("#root");
      if (darkModeEnabled) {
        element.classList.add(className);
      } else {
        element.classList.remove(className);
      }
    },
    [darkModeEnabled] // Only re-run when value has changed
  );
  return m("[data-test-id=dark]", [
    m("h2", "SideEffect"),
    m("p[data-test-id=darkModeEnabled]", 
      `SideEffect mode enabled: ${darkModeEnabled}`
    ),
    m("button[data-test-id=button]", 
      { onclick: () => setDarkModeEnabled(true) },
      "Set dark mode"
    ),
  ]);
});

const App = {
  view: () => [
    m(SideEffect),
  ]
}

m.mount(
  document.querySelector("#root"),
  App
);

  </script>
</body>
</html>
